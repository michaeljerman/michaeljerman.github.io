---
title: "Further Issues in Variable Selection and Data Scaling"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE, eval=T)
```

## Lecture Video

**Embedded video 1:**[https://media.oregonstate.edu/media/t/0_0o57upgs](https://media.oregonstate.edu/media/t/0_0o57upgs)

**Embedded video 2:**[https://media.oregonstate.edu/media/t/0_hupb6ryn](https://media.oregonstate.edu/media/t/0_hupb6ryn)



## R Example
Open the `week5.R` script that we started previously and click the "Source" button to execute all of the commands. 

Sometimes the original units of measurement of a variable are difficult to interpret. For instance, there are lots of standardized tests—SAT, ACT, LSAT, MCAT, etc.---and they all have different scoring systems. Unless one is an expert on each of the tests, it can be hard to make sense of a one-unit change in a test score. Another example is from public health: we can detect signs of malnutrition in young children by their height. But again unless you’re an expert, it’s hard to know what "normal" height for a growing child should be, or how to determine whether a 1-cm gain in height is large or small.

For these types of situations, it can be helpful to standardize variables. What does it mean to standardize a variable? Convert it to a standard normal distribution by subtracting the mean and dividing by standard deviation, also known as a z-score:

$$Z = \dfrac{X − \mu}{sd(X)}$$

where in practice, we estimate the mean $\mu$ with the sample mean $\bar{X}$ and use the sample standard deviation. What are the mean and standard deviation of Z? Mean=0, standard deviation=1, so a one-unit change corresponds to a one-standard deviation change.

This can be useful in the regression context by making results easier to interpret. For instance, consider the following regression of salary on school performance among lawyers using the `lawsch85` dataset from the `wooldridge` pacakge:

$$\ln(salary) = \beta_0 + \beta_1LSAT + \beta_2GPA + \beta_3 rank + u$$

```{r}
data(lawsch85)
lm_lsat <- lm(lsalary ~ LSAT + GPA + rank, data=lawsch85)
summary(lm_lsat)
```

LSAT scores range from 120 to 180, so it’s not really natural to think about one-unit changes on this scale. Suppose instead we converted LSAT scores into a z-score by standardizing it. Then our new regression would be:

$$\ln(salary) = \beta_0 + \beta_1 z_{LSAT} + \beta_2 GP A + \beta_3 rank + u$$

```{r}
xbar <- mean(lawsch85$LSAT, na.rm=T) # na.rm=T removes missing values
sdev <- sd(lawsch85$LSAT, na.rm=T)
lawsch85$zlsat <- (lawsch85$LSAT - xbar)/sdev
lm_z <- lm(lsalary ~ zlsat + GPA + rank, data=lawsch85)
summary(lm_z)
```

Now how do we interpret $\widehat{\beta}_1$? As the effect of a one-standard deviation change on (log) salary. Therefore, a one standard-deviation increase in LSAT score would predict a salary increase of 3.7%.
If all the data—both dependent and independent variables—are standardized to z-scores, we call the resulting coefficients *beta coefficients*. In that case, we would run the regression without a constant term, because we’ve rescaled the data to have mean zero. R can calculate beta coefficients automatically using the `lm.beta()` function in the `lm.beta` pacakge. 

## Practice Question

Most law students tend to have good grades during their undergraduate schooling. Therefore it might be difficult to expect that a one-unit increase in GPA (a full letter grade) will have a meaningful predictive effect on salary. Instead, estimate the equation:

$$\ln(salary) = \beta_0 + \beta_1 LSAT + \beta_2 z_{GPA} + \beta_3 rank + u$$

What is the estimated marginal effect of increasing GPA by one standard deviation on wages, holding all else equal?


<div id="spoiler" style="display:none">

```{r}
xbar <- mean(lawsch85$GPA, na.rm=T) # na.rm=T removes missing values
sdev <- sd(lawsch85$GPA, na.rm=T)
lawsch85$zGPA <- (lawsch85$GPA - xbar)/sdev
lm_zGPA <- lm(lsalary ~ LSAT + zGPA + rank, data=lawsch85)
summary(lm_zGPA)
```

Students with grades one standard-deviation higher than other students earn on average 3.95% more per year than lower GPA students, all else equal.

</div>

<button title="Click to Show/Hide Content" type="button" onclick="if(document.getElementById('spoiler') .style.display=='none') {document.getElementById('spoiler') .style.display=''}else{document.getElementById('spoiler') .style.display='none'}">Show/Hide Solution</button>



---

[Previous](ar2_II.html) | [Table of contents](toc.html) 
