---
title: "Ordinary Least Squares Derivation, Part II"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE, eval=F)

library(wooldridge)
data(wage2)
```

## Lecture Video

<iframe id="kaltura_player" src="https://cdnapisec.kaltura.com/p/391241/sp/39124100/embedIframeJs/uiconf_id/22119142/partner_id/391241?iframeembed=true&playerId=kaltura_player&entry_id=0_osgldf4z&flashvars[localizationCode]=en&amp;flashvars[leadWithHTML5]=true&amp;flashvars[sideBarContainer.plugin]=true&amp;flashvars[sideBarContainer.position]=left&amp;flashvars[sideBarContainer.clickToClose]=true&amp;flashvars[chapters.plugin]=true&amp;flashvars[chapters.layout]=vertical&amp;flashvars[chapters.thumbnailRotator]=false&amp;flashvars[streamSelector.plugin]=true&amp;flashvars[EmbedPlayer.SpinnerTarget]=videoHolder&amp;flashvars[dualScreen.plugin]=true&amp;flashvars[hotspots.plugin]=1&amp;flashvars[Kaltura.addCrossoriginToIframe]=true&amp;&wid=0_7r7wibya" width="720" height="480"  allow="autoplay *; fullscreen *; encrypted-media *" sandbox="allow-forms allow-same-origin allow-scripts allow-top-navigation allow-pointer-lock allow-popups allow-modals allow-orientation-lock allow-popups-to-escape-sandbox allow-presentation allow-top-navigation-by-user-activation" frameborder="0" title="Kaltura Player"></iframe>


## R Example

Continuing with the `wage2` dataset, let's calculate the OLS estimates for the model:

$$wage = \beta_0 + \beta_1 educ + u$$

From the above video, we know that:

$$\widehat{\beta}_1 = \dfrac{\widehat{cov}(educ, wage)}{\widehat{var}(educ)}$$

R has built-in commands that allow us to quickly calculate variances and covariances:

```{r}
cov(wage2$educ, wage2$wage)/var(wage2$educ)
```

Note that we *cannot* simply type `cov(educ, wage)` and `var(educ)` (try it!). This is because R doesn't know what the variables `educ` and `wage` refer to---neither are defined in the environment (the top-right panel in RStudio). Instead, we have to tell R to look within the `wage2` object to find those variables. We do that by using the dollar-sign symbol `$`. We start with the object `wage2`, then use the dollar sign followed by the variable of interest. This tells R to use that specific column (vector) from our data frame. The code `wage2$educ` tells R "choose only the education data from the `wage2` dataset."

In the console, we see that the OLS estimate of $\beta_1$ is 60.21428. We can use this along with the sample means of `wage` and `educ` to calculate the intercept:

$$\widehat{\beta}_0 = \overline{wage} - \widehat{\beta}_1 \overline{educ}$$

We can calculate the mean of our two variables with the `mean()` function:

```{r}
mean(wage2$educ)
mean(wage2$wage)
```

Now we can copy and paste the reported numbers and calculate $\widehat{\beta}_0$. 

There's an easier way, however. Instead of copy/paste, we can let R do the hard work for us by saving the output of each command as a variable in R:

```{r}
beta1_hat <- cov(wage2$educ, wage2$wage)/var(wage2$educ)
wage_bar <- mean(wage2$wage)
educ_bar <- mean(wage2$educ)

wage_bar - beta1_hat*educ_bar
```

According to R, the estimated vertical intercept is $\widehat{\beta}_0 = 146.9524$. 

## Practice Question
Calculate $\widehat{\beta}_1$ and $\widehat{\beta}_0$ for the model:

$$\ln(wage) = \beta_0 + \beta_1 educ + u$$

<div id="spoiler" style="display:none">


```{r, eval=T}
beta1_hat <- cov(wage2$educ, wage2$lwage)/var(wage2$educ)
beta1_hat
lwage_bar <- mean(wage2$lwage)
educ_bar <- mean(wage2$educ)
lwage_bar - beta1_hat*educ_bar
```

</div>

<button title="Click to Show/Hide Content" type="button" onclick="if(document.getElementById('spoiler') .style.display=='none') {document.getElementById('spoiler') .style.display=''}else{document.getElementById('spoiler') .style.display='none'}">Show/Hide Solution</button>



[Back](2_1.html) | [Table of contents](2_0.html) | [Next](2_3.html) 
